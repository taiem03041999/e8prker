import{R as e,r as s}from"./index.44a37fc8.js";import{a as S}from"./client.fccac619.js";import{u as _}from"./index.32dc055b.js";import{t as F}from"./turnstile.06070236.js";import"./_commonjsHelpers.f037b798.js";const L=[["BD +880",880],["BR +55",55],["CN +86",86],["HK +852",852],["ID +62",62],["JP +81",81],["MO +853",853],["MY +60",60],["NZ +64",64],["SG +65",65],["TW +886",886],["TH +66",66],["VN +84",84]],q=({translation:t})=>{const[u,h]=s.exports.useState(""),[i,E]=s.exports.useState(!1),[g,p]=s.exports.useState(!1),[b,$]=s.exports.useState(new URLSearchParams(window.location.search).get("return_link")),y=async l=>{const a=await F("login"),o=document.querySelector("[name='csrf-token']").content;return await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":o},body:JSON.stringify({turnstile_token:a,...l})})},{register:r,watch:N,handleSubmit:k,resetField:c,formState:{isValid:m,errors:n}}=_({defaultValues:{login_type:"email"},mode:"onChange"}),x=l=>{p(!0),y(l).then(a=>a.json()).then(({success:a,errors:o})=>{p(!1),a&&(E(!0),setTimeout(()=>{window.location.assign(b||"/")},2e3)),o&&(c("password"),h(o==null?void 0:o.login_error))}).catch(a=>{console.log(a)})},d=N("login_type")==="email";e.useEffect(()=>{c("email"),c("phone")},[d]);const v=()=>g?"loading":Object.keys(n).length>0?"error":m?"success":"",w=()=>g?t.logging_in:i?t.login_success:t.login;return e.createElement("div",{className:`
      grid gap-3 items-start transition login-form ${i&&"success"}
    `},e.createElement("div",{className:`login-blob ${v()}`},e.createElement("div",{className:"blob"}),e.createElement("div",{className:"blob"})),i&&e.createElement("div",{className:"success-redirecting"},e.createElement("div",{className:"text-center"},e.createElement("p",{className:"text-gradient yellow text-xl block font-bold mb-10 uppercase"},t.login_success),e.createElement("p",{className:"text-gray-300 block italic"},b?t.redirecting_to_return_link:t.redirecting))),e.createElement("form",{onSubmit:k(x),id:"loginForm"}," ",e.createElement("div",{className:"grid grid-cols-2 relative rounded mb-4 bg-gray-900 border border-zinc-500"},e.createElement("div",{className:"z-10 relative"},e.createElement("input",{...r("login_type",{required:!0}),type:"radio",value:"email",id:"email-login-type",className:"hidden text-indigo-600 focus:ring-indigo-600"}),e.createElement("label",{htmlFor:"email-login-type",className:"flex bg-black/10 hover:bg-black/20 items-center rounded cursor-pointer justify-center w-full h-11 block text-sm font-medium leading-6 text-white"},t.email)),e.createElement("div",{className:"z-10 relative"},e.createElement("input",{...r("login_type",{required:!0}),type:"radio",value:"phone",id:"phone-login-type",className:"hidden border-gray-300 text-indigo-600 focus:ring-indigo-600"}),e.createElement("label",{htmlFor:"phone-login-type",className:"flex bg-black/10 hover:bg-black/20 items-center rounded cursor-pointer justify-center w-full h-11 block text-sm font-medium leading-6 text-white"},t.phone)),e.createElement("div",{className:`
            absolute top-0 left-0 h-full bg-pink-700 w-1/2 z-0 rounded transform transition
            ${d?"translate-x-0":"translate-x-full"}
          `})),d?e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block font-medium",htmlFor:"email"},t.email),e.createElement("input",{name:"email",type:"email",...r("email",{required:"required",pattern:{value:/\S+@\S+\.\S+/,message:"Invalid Email"}}),className:`
                    block h-12 w-full bg-gray-900 rounded-md p-4 mt-2 focus:ring-0
                    ${n!=null&&n.email?"focus:border-red-700":"focus:border-teal-900"}
                  `})):e.createElement("div",{className:"mb-4 grid grid-cols-3 gap-2"},e.createElement("label",{className:"block font-medium col-span-3",htmlFor:"phone"},t.phone),e.createElement("select",{...r("country_code",{required:!0}),className:"h-12 px-2 bg-gray-900 block rounded-md"},L.map((l,a)=>e.createElement("option",{value:l[1],key:a},l[0]))),e.createElement("div",{className:"col-span-2"},e.createElement("input",{name:"phone",type:"text",...r("phone",{required:"required",pattern:{value:/[0-9]+/}}),className:`
                    block h-12 w-full bg-gray-900 rounded-md p-4 focus:ring-0
                    ${n!=null&&n.phone?"focus:border-red-700":"focus:border-teal-900"}
                  `}))),e.createElement("div",{className:"mb-8"},e.createElement("label",{className:"block font-medium",htmlFor:"password"},t.password),e.createElement("input",{name:"password",type:"password",className:`
              block h-12 w-full bg-gray-900 rounded-md p-4 mt-2 focus:ring-0
              ${n!=null&&n.password?"focus:border-red-400/40":"focus:border-teal-500/40"}
            `,...r("password",{required:!0,maxLength:20,minLength:8})})),u&&e.createElement("p",{className:"italic text-red-500 text-sm text-center mb-4"},u),e.createElement("button",{disabled:!m,id:"login-button",className:`font-semibold py-4 w-full
            ${m?"bg-teal-800 text-white":"bg-zinc-600 text-zinc-500 hover:animate-shake"}
            rounded-md cursor-pointer group`,type:"submit"},w())))},f=document.getElementById("login-root"),T=JSON.parse(f.getAttribute("data")),R=S.createRoot(f);R.render(e.createElement(q,{...T}));